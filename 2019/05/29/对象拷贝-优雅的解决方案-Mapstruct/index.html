<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>对象拷贝 - 优雅的解决方案 Mapstruct - 云扬四海</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="云扬四海"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="云扬四海"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="MapStruct GitHub 访问地址 : https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;mapstruct&amp;#x2F;mapstruct&amp;#x2F;  使用例子 : https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;mapstruct&amp;#x2F;mapstruct-examples  MapStrcut与其它工具对比以及使用说明!  http:&amp;#x2F;&amp;#x2F;www.tuicool.com&amp;#x2F;articles&amp;#x2F;uiIRjai  是否一直在使用BeanU"><meta property="og:type" content="blog"><meta property="og:title" content="对象拷贝 - 优雅的解决方案 Mapstruct"><meta property="og:url" content="http://ityouknow.cn/2019/05/29/%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D-%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-Mapstruct/"><meta property="og:site_name" content="云扬四海"><meta property="og:description" content="MapStruct GitHub 访问地址 : https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;mapstruct&amp;#x2F;mapstruct&amp;#x2F;  使用例子 : https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;mapstruct&amp;#x2F;mapstruct-examples  MapStrcut与其它工具对比以及使用说明!  http:&amp;#x2F;&amp;#x2F;www.tuicool.com&amp;#x2F;articles&amp;#x2F;uiIRjai  是否一直在使用BeanU"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://ityouknow.cn/img/og_image.png"><meta property="article:published_time" content="2019-05-29T06:54:00.000Z"><meta property="article:modified_time" content="2025-12-19T06:50:33.454Z"><meta property="article:author" content="RolandLee"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://ityouknow.cn/2019/05/29/%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D-%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-Mapstruct/"},"headline":"云扬四海","image":["http://ityouknow.cn/img/og_image.png"],"datePublished":"2019-05-29T06:54:00.000Z","dateModified":"2025-12-19T06:50:33.454Z","author":{"@type":"Person","name":"RolandLee"},"description":"MapStruct GitHub 访问地址 : https:&#x2F;&#x2F;github.com&#x2F;mapstruct&#x2F;mapstruct&#x2F;  使用例子 : https:&#x2F;&#x2F;github.com&#x2F;mapstruct&#x2F;mapstruct-examples  MapStrcut与其它工具对比以及使用说明!  http:&#x2F;&#x2F;www.tuicool.com&#x2F;articles&#x2F;uiIRjai  是否一直在使用BeanU"}</script><link rel="canonical" href="http://ityouknow.cn/2019/05/29/%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D-%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-Mapstruct/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.8.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.2"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">云扬四海</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">列表</a><a class="navbar-item" href="/categories">类别</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a><a class="navbar-item" href="/yun/fireworks/index.html">fireworks</a><a class="navbar-item" href="/yun/Photo_Wall3D.html">photoWall3D</a><a class="navbar-item" href="/yun/sheep.html">sheep</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="http://github.com/yunlongn"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-05-29T06:54:00.000Z" title="2019-05-29T06:54:00.000Z">2019-05-29</time>发表</span><span class="level-item"><time dateTime="2025-12-19T06:50:33.454Z" title="2025-12-19T06:50:33.454Z">2025-12-19</time>更新</span><span class="level-item"> RolandLee </span><span class="level-item"><a class="link-muted" href="/categories/java/">java</a></span><span class="level-item">22 分钟读完 (大约3299个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">对象拷贝 - 优雅的解决方案 Mapstruct</h1><div class="content"><ul>
<li><p>MapStruct <a target="_blank" rel="noopener" href="https://github.com/mapstruct/mapstruct/">GitHub 访问地址 : https://github.com/mapstruct/mapstruct/</a></p>
</li>
<li><p>使用例子 : <a target="_blank" rel="noopener" href="https://github.com/mapstruct/mapstruct-examples">https://github.com/mapstruct/mapstruct-examples</a></p>
</li>
<li><p>MapStrcut与其它工具对比以及使用说明!  <a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/uiIRjai">http://www.tuicool.com/articles/uiIRjai</a></p>
</li>
<li><p>是否一直在使用BeanUtils.copyProperties 用于对象属性拷贝。 出现种种小问题。</p>
</li>
<li><ul>
<li>会将同名属性拷贝到另外一个对象中，操作方便但是存在一个缺陷 （速度慢）</li>
</ul>
</li>
<li><ul>
<li>有些同名字段却无法进行特殊化处理，将会导致不想修改的字段被覆盖。也不能自定义属性映射<span id="more"></span></li>
</ul>
</li>
<li><p>在 mvc层 我们经常会DTO对象返回给前端 进行字段渲染。我们不喜欢将所有字段都显示给前端，或者我们需要修改字段返回给前端，例如 数据中存储的上架下架是0，1  但是前端需要的字段是true 和 false。 我们都得进行手动判断处理然后编辑成DTO返回给前端</p>
<p> <code>MapStruct</code>是一种类型安全的<code>bean</code>映射类生成<code>java注释处理器</code>。<br>我们要做的就是定义一个映射器接口，声明任何必需的映射方法。在编译的过程中，MapStruct会生成此接口的实现。该实现使用纯java方法调用的源和目标对象之间的映射，MapStruct节省了时间，通过生成代码完成繁琐和容易出错的代码逻辑。。</p>
</li>
<li><p>MapStruct 拥有的优点：</p>
</li>
<li><ul>
<li>使用普通方法调用而不是反射来快速执行，他会在编译器生成相应的 Impl 方法调用时直接通过简单的 getter/setter调用而不是反射或类似的方式将值从源复制到目标</li>
</ul>
</li>
<li><ul>
<li>编译时类型安全性 : 只能映射彼此的对象和属性，不能将商品实体意外映射到用户 DTO等</li>
</ul>
</li>
<li><ul>
<li>在构建时清除错误报告，如 映射不完整 (并非所有目标属性都被映射) 或 映射不正确(无法找到适当的映射方法或类型转换)</li>
</ul>
</li>
<li><p>MapStruct 提供的重要注解 :</p>
</li>
<li><ul>
<li>@Mapper : 标记这个接口作为一个映射接口，并且是编译时 MapStruct 处理器的入口</li>
</ul>
</li>
<li><ul>
<li>@Mapping : 解决源对象和目标对象中，属性名字不同的情况</li>
</ul>
</li>
<li><ul>
<li>Mappers.getMapper 自动生成的接口的实现可以通过 Mapper 的 class对象获取，从而让客户端可以访问 Mapper接口的实现</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot; xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line"></span><br><span class="line">         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    &lt;properties&gt;</span><br><span class="line"></span><br><span class="line">       &#x2F;&#x2F; ...</span><br><span class="line"></span><br><span class="line">        &lt;org.mapstruct.version&gt;1.2.0.Final&lt;&#x2F;org.mapstruct.version&gt;</span><br><span class="line"></span><br><span class="line">    &lt;&#x2F;properties&gt;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line"></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        &lt;!-- MapStruct START --&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line"></span><br><span class="line">            &lt;groupId&gt;org.mapstruct&lt;&#x2F;groupId&gt;</span><br><span class="line"></span><br><span class="line">            &lt;artifactId&gt;mapstruct-jdk8&lt;&#x2F;artifactId&gt;</span><br><span class="line"></span><br><span class="line">            &lt;version&gt;$&#123;org.mapstruct.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line"></span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line"></span><br><span class="line">            &lt;groupId&gt;org.mapstruct&lt;&#x2F;groupId&gt;</span><br><span class="line"></span><br><span class="line">            &lt;artifactId&gt;mapstruct-processor&lt;&#x2F;artifactId&gt;</span><br><span class="line"></span><br><span class="line">            &lt;version&gt;$&#123;org.mapstruct.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line"></span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- MapStruct END --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line"></span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line"></span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line"></span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line"></span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line"></span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line"></span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line"></span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;&#x2F;groupId&gt;</span><br><span class="line"></span><br><span class="line">                &lt;artifactId&gt;maven-compiler-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line"></span><br><span class="line">                &lt;version&gt;3.5.1&lt;&#x2F;version&gt;</span><br><span class="line"></span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;source&gt;1.8&lt;&#x2F;source&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;target&gt;1.8&lt;&#x2F;target&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;annotationProcessorPaths&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;path&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;groupId&gt;org.mapstruct&lt;&#x2F;groupId&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;artifactId&gt;mapstruct-processor&lt;&#x2F;artifactId&gt;</span><br><span class="line"></span><br><span class="line">                            &lt;version&gt;$&#123;org.mapstruct.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;&#x2F;path&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;&#x2F;annotationProcessorPaths&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;compilerArgs&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;compilerArg&gt;-Amapstruct.defaultComponentModel&#x3D;spring&lt;&#x2F;compilerArg&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp&#x3D;true&lt;&#x2F;compilerArg&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment&#x3D;true&lt;&#x2F;compilerArg&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;&#x2F;compilerArgs&gt;</span><br><span class="line"></span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line"></span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line"></span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line"></span><br><span class="line">    &lt;&#x2F;build&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>


<ul>
<li>BasicObjectMapper包含了4个基本方法，单个和集合以及反转的单个和集合。开发中如需要对象转换操作可直接新建 interface 并继承 BasicObjectMapper，并在新建的接口上加上 @Mapper(componentModel = “spring”)，如果是属性中包含其它类以及该类已经存在 Mapper 则注解中加上 users = {类名.class}。componentModel = “spring” 该配置表示生成的实现类默认加上 spring @Component 注解，使用时可直接通过 @Autowire 进行注入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public interface BasicObjectMapper&lt;SOURCE, TARGET&gt; &#123;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    @Mappings(&#123;&#125;)</span><br><span class="line"></span><br><span class="line">    @InheritConfiguration</span><br><span class="line"></span><br><span class="line">    TARGET to(SOURCE var1);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    @InheritConfiguration</span><br><span class="line"></span><br><span class="line">    List&lt;TARGET&gt; to(List&lt;SOURCE&gt; var1);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    @InheritInverseConfiguration</span><br><span class="line"></span><br><span class="line">    SOURCE from(TARGET var1);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    @InheritInverseConfiguration</span><br><span class="line"></span><br><span class="line">    List&lt;SOURCE&gt; from(List&lt;TARGET&gt; var1);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>直接使用进行对象数据转换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line"></span><br><span class="line">public class ProductCategory &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;** 类别编码 *&#x2F;</span><br><span class="line"></span><br><span class="line">    private String categoryCode;</span><br><span class="line"></span><br><span class="line">    &#x2F;** 类别名称 *&#x2F;</span><br><span class="line"></span><br><span class="line">    private String categoryName;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">@Data</span><br><span class="line"></span><br><span class="line">public class CategoryVo &#123;</span><br><span class="line"></span><br><span class="line">    private String code;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.mapstruct.Mapper;</span><br><span class="line"></span><br><span class="line">import org.mapstruct.Mapping;</span><br><span class="line"></span><br><span class="line">import org.mapstruct.Mappings;</span><br><span class="line"></span><br><span class="line">import org.mapstruct.factory.Mappers;</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CategoryMapper extends BasicObjectMapper&lt;CategoryVo, ProductCategory&gt; &#123;</span><br><span class="line"></span><br><span class="line">    CategoryMapper MAPPER &#x3D; Mappers.getMapper(CategoryMapper.class);</span><br><span class="line"></span><br><span class="line">    @Mappings(&#123;</span><br><span class="line"></span><br><span class="line">            @Mapping(source &#x3D; &quot;code&quot;, target &#x3D; &quot;categoryCode&quot;),</span><br><span class="line"></span><br><span class="line">            @Mapping(source &#x3D; &quot;name&quot;, target &#x3D; &quot;categoryName&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    ProductCategory to(CategoryVo source);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">    CategoryMapper categoryMapper &#x3D; CategoryMapper.MAPPER;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    CategoryVo vo &#x3D; new CategoryVo();</span><br><span class="line"></span><br><span class="line">    vo.setCode(&quot;0000&quot;);</span><br><span class="line"></span><br><span class="line">    vo.setName(&quot;属性名称&quot;);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    ProductCategory pc &#x3D; categoryMapper.to(vo); &#x2F;&#x2F; 通过 to方法得到 ProductCategory</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;1&quot; + pc);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    CategoryVo vo1 &#x3D; categoryMapper.from(pc); &#x2F;&#x2F; 通过 from方法得到 CategoryVo，既反转 to方法</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;2&quot; + vo1);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    List&lt;ProductCategory&gt; pcList &#x3D; categoryMapper.to(Arrays.asList(vo, vo1)); &#x2F;&#x2F; 通过to方法从集合得到转换后的集合</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;3&quot; + pcList);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    List&lt;CategoryVo&gt; voList &#x3D; categoryMapper.from(pcList); &#x2F;&#x2F; 反转集合</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;4&quot; + voList);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<ul>
<li>自定义方法添加到映射器 : 在某些情况下，需要手动实现 MapStruct 无法生成的从一种类型到另一种类型的特定映射，有如下两种实现方法 :</li>
<li>方法1&gt; 在另一个类上实现此类方法，然后由 MapStruct 生成的映射器使用该方法</li>
<li>方法2&gt; 在Java 8或更高版本时，可以直接在映射器界面中实现自定义方法作为默认方法。如果参数和返回类型匹配，生成的代码将调用默认方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line">		</span><br><span class="line">    CarMapper MAPPER &#x3D; Mappers.getMapper(CarMapper.class);</span><br><span class="line">    </span><br><span class="line">    @Mappings(&#123;...&#125;)</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    default PersonDto personToPersonDto(Person person) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; hand-written mapping logic</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ul>
<li>映射器也可以定义为抽象类的形式而不是接口，并直接在此映射器类中实现自定义方法。在这种情况下，MapStruct将生成抽象类的扩展，并实现所有抽象方法。这种方法优于声明默认方法的优点是可以在映射器类中声明附加字段</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public abstract class CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Mappings(...)</span><br><span class="line"></span><br><span class="line">    public abstract CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    public PersonDto personToPersonDto(Person person) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; hand-written mapping logic</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>多源参数映射方法 : MapStruct 支持多个源参数的映射方法，将几个实体组合成一个数据传输对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface AddressMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Mappings(&#123;</span><br><span class="line"></span><br><span class="line">        @Mapping(source &#x3D; &quot;person.description&quot;, target &#x3D; &quot;description&quot;),</span><br><span class="line"></span><br><span class="line">        @Mapping(source &#x3D; &quot;address.houseNo&quot;, target &#x3D; &quot;houseNumber&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    DeliveryAddressDto personAndAddressToDeliveryAddressDto(Person person, Address address);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果多个源对象定义了一个具有相同名称的属性，则必须使用 @Mapping 注释来指定从中检索属性的源参数，如果这种歧义未得到解决，将会引发错误。对于在给定源对象中只存在一次的属性，指定源参数的名称是可选的，因为它可以自动确定</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">MapStruct 还提供直接引用源参数</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface AddressMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Mappings(&#123;</span><br><span class="line"></span><br><span class="line">        @Mapping(source &#x3D; &quot;person.description&quot;, target &#x3D; &quot;description&quot;),</span><br><span class="line"></span><br><span class="line">        @Mapping(source &#x3D; &quot;hn&quot;, target &#x3D; &quot;houseNumber&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    DeliveryAddressDto personAndAddressToDeliveryAddressDto(Person person, Integer hn);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>直接字段访问映射 : MapStruct 支持 public 没有 getter/setter 的字段的映射，如果 MapStruct 无法为属性找到合适的 getter/setter方法，MapStruct 将使用这些字段作为 读/写访问器。如果它是 public，则字段被认为是读取存取器 public final。如果一个字段 static 不被视为读取存取器只有在字段被认为是写入访问者的情况下 public。如果一个字段 final 和/或 static 它不被认为是写入访问者</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">public class Customer &#123;</span><br><span class="line"></span><br><span class="line">    private Long id;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; getters and setter omitted for brevity</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">public class CustomerDto &#123;</span><br><span class="line"></span><br><span class="line">    public Long id;</span><br><span class="line"></span><br><span class="line">    public String customerName;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CustomerMapper &#123;</span><br><span class="line"></span><br><span class="line">    CustomerMapper MAPPER &#x3D; Mappers.getMapper( CustomerMapper.class );</span><br><span class="line"> </span><br><span class="line">    @Mapping(source &#x3D; &quot;customerName&quot;, target &#x3D; &quot;name&quot;)</span><br><span class="line">    Customer toCustomer(CustomerDto customerDto);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    @InheritInverseConfiguration</span><br><span class="line">    CustomerDto fromCustomer(Customer customer);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 生成的映射器如下</span><br><span class="line"></span><br><span class="line">public class CustomerMapperImpl implements CustomerMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line"></span><br><span class="line">    public Customer toCustomer(CustomerDto customerDto) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ...</span><br><span class="line"></span><br><span class="line">        customer.setId( customerDto.id );</span><br><span class="line"></span><br><span class="line">        customer.setName( customerDto.customerName );</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ...</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line"></span><br><span class="line">    public CustomerDto fromCustomer(Customer customer) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ...</span><br><span class="line"></span><br><span class="line">        customerDto.id &#x3D; customer.getId();</span><br><span class="line"></span><br><span class="line">        customerDto.customerName &#x3D; customer.getName();</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>检索映射器 : Mapper实例 通过 org.mapstruct.factory.Mappers 的  getMapper() 方法来检索。通常 映射器接口应该定义一个名为的成员 INSTANCE ，它包含一个映射器类型的单个实例 :</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    CarMapper INSTANCE &#x3D; Mappers.getMapper(CarMapper.class);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">这种模式使客户非常容易地使用映射器对象，而无需反复实例化新的实例 :</span><br><span class="line"></span><br><span class="line">Car car &#x3D; ...;</span><br><span class="line"></span><br><span class="line">CarDto dto &#x3D; CarMapper.INSTANCE.carToCarDto( car );</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">使用依赖注入 : 通过 Spring 依赖注入可以获取映射器对象</span><br><span class="line"></span><br><span class="line">@Mapper(componentModel &#x3D; &quot;spring&quot;)</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Inject</span><br><span class="line">private CarMapper mapper;</span><br></pre></td></tr></table></figure>

<ul>
<li>数据类型转换 : 源对象和目标对象中映射的属性类型可能不同，MapStruct 提供自动处理类型转换，提供如下自动转换 :</li>
<li><ul>
<li>1&gt; Java基本数据类型及其相应的包装类型，如 int 和 Integer，boolean 和 Boolean 等生成的代码是 null 转换一个包装型成相应的原始类型时一个感知，即 null 检查将被执行</li>
</ul>
</li>
<li><ul>
<li>2&gt; Java基本号码类型和包装类型，例如之间 int 和 long 或 byte 和 Integer (大类类型数据转换成小类可能出现精度损失)</li>
</ul>
</li>
<li><ul>
<li>3&gt; 所有Java基本类型之间 (包括其包装) 和 String 之间，例如 int 和 String 或 Boolean 和 String，java.text.DecimalFormat 均可以指定格式字符串</li>
</ul>
</li>
<li><ul>
<li>int 到 String的转换</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">int 到 String的转换</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Mapping(source &#x3D; &quot;price&quot;, numberFormat &#x3D; &quot;$#.00&quot;)</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    @IterableMapping(numberFormat &#x3D; &quot;$#.00&quot;)</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; prices(List&lt;Integer&gt; prices);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigDecimal 转换为 String</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Mapping(source &#x3D; &quot;power&quot;, numberFormat &#x3D; &quot;#.##E0&quot;)</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">从日期到字符串的转换</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Mapping(source &#x3D; &quot;manufacturingDate&quot;, dateFormat &#x3D; &quot;dd.MM.yyyy&quot;)</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    @IterableMapping(dateFormat &#x3D; &quot;dd.MM.yyyy&quot;)</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; stringListToDateList(List&lt;Date&gt; dates);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">映射对象引用 : 对象中如果包含另一个对象的引用，此时只需为引用的对象类型定义映射方法即可</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    PersonDto personToPersonDto(Person person);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"># 映射器控制嵌套的bean映射</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface FishTankMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Mappings(&#123;</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;fish.kind&quot;, source &#x3D; &quot;fish.type&quot;),</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;fish.name&quot;, ignore &#x3D; true),</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;plant&quot;, ignore &#x3D; true ),</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;ornament&quot;, ignore &#x3D; true ),</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;material&quot;, ignore &#x3D; true),</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;ornament&quot;, source &#x3D; &quot;interior.ornament&quot;),</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;material.materialType&quot;, source &#x3D; &quot;material&quot;),</span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;quality.report.organisation.name&quot;, source &#x3D; &quot;quality.report.organisationName&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    FishTankDto map( FishTank source );</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>调用其他映射器 : MapStruct 中可以调用在其他类中定义的映射方法，无论是由MapStruct生成的映射器还是手写映射方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># 手动实现的映射</span><br><span class="line"></span><br><span class="line">public class DateMapper &#123;</span><br><span class="line"></span><br><span class="line">    public String asString(Date date) &#123;</span><br><span class="line"></span><br><span class="line">        return date !&#x3D; null ? new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(date) : null;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Date asDate(String date) &#123;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line"></span><br><span class="line">            return date !&#x3D; null ? new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(date) : null;</span><br><span class="line"></span><br><span class="line">        &#125; catch (ParseException e) &#123;</span><br><span class="line"></span><br><span class="line">            throw new RuntimeException(e);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"># 引用另一个映射器类</span><br><span class="line"></span><br><span class="line">@Mapper(uses &#x3D; DateMapper.class)</span><br><span class="line"></span><br><span class="line">public class CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>当为该  carToCarDto() 方法的实现生成代码时，MapStruct将查找将 Date 对象映射到String的方法，在 DateMapper 该类上找到它并生成 asString() 用于映射该 manufacturingDate 属性的调用</li>
<li>映射集合 : 集合类型(映射 List，Set 等等) 以相同的方式映射 bean类型，通过定义与在映射器接口所需的源和目标类型的映射方法。生成的代码将包含一个遍历源集合的循环，转换每个元素并将其放入目标集合中。如果在给定的映射器或其使用的映射器中找到了集合元素类型的映射方法，则会调用此方法以执行元素转换。或者，如果存在源和目标元素类型的隐式转换，则将调用此转换例程</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; integerSetToStringSet(Set&lt;Integer&gt; integers);</span><br><span class="line"></span><br><span class="line">    List&lt;CarDto&gt; carsToCarDtos(List&lt;Car&gt; cars);</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"># 生成的集合映射方法</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">public Set&lt;String&gt; integerSetToStringSet(Set&lt;Integer&gt; integers) &#123;</span><br><span class="line"></span><br><span class="line">    if (integers &#x3D;&#x3D; null) &#123;</span><br><span class="line"></span><br><span class="line">        return null;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; set &#x3D; new HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    for (Integer integer : integers) &#123;</span><br><span class="line"></span><br><span class="line">        set.add(String.valueOf(integer));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return set;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"></span><br><span class="line">public List&lt;CarDto&gt; carsToCarDtos(List&lt;Car&gt; cars) &#123;</span><br><span class="line"></span><br><span class="line">    if (cars &#x3D;&#x3D; null) &#123;</span><br><span class="line"></span><br><span class="line">        return null;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    List&lt;CarDto&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    for (Car car : cars) &#123;</span><br><span class="line"></span><br><span class="line">        list.add(carToCarDto(car));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return list;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">映射Map :</span><br><span class="line"></span><br><span class="line">public interface SourceTargetMapper &#123;</span><br><span class="line"></span><br><span class="line">    @MapMapping(valueDateFormat &#x3D; &quot;dd.MM.yyyy&quot;)</span><br><span class="line"></span><br><span class="line">    Map&lt;String, String&gt; longDateMapToStringStringMap(Map&lt;Long, Date&gt; source);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">映射流 :</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface CarMapper &#123;</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; integerStreamToStringSet(Stream&lt;Integer&gt; integers);</span><br><span class="line"></span><br><span class="line">    List&lt;CarDto&gt; carsToCarDtos(Stream&lt;Car&gt; cars);</span><br><span class="line"></span><br><span class="line">    CarDto carToCarDto(Car car);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>映射枚举 : 默认情况下，源枚举中的每个常量映射到目标枚举类型中具有相同名称的常量。如果需要，可以使用 @ValueMapping 注释帮助将source enum中的常量映射为具有其他名称的常量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface OrderMapper &#123;</span><br><span class="line"></span><br><span class="line">    OrderMapper INSTANCE &#x3D; Mappers.getMapper(OrderMapper.class);</span><br><span class="line"></span><br><span class="line">    @ValueMappings(&#123;</span><br><span class="line"></span><br><span class="line">            @ValueMapping(source &#x3D; &quot;EXTRA&quot;, target &#x3D; &quot;SPECIAL&quot;),</span><br><span class="line"></span><br><span class="line">            @ValueMapping(source &#x3D; &quot;STANDARD&quot;, target &#x3D; &quot;DEFAULT&quot;),</span><br><span class="line"></span><br><span class="line">            @ValueMapping(source &#x3D; &quot;NORMAL&quot;, target &#x3D; &quot;DEFAULT&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    ExternalOrderType orderTypeToExternalOrderType(OrderType orderType);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">默认值和常量 : </span><br><span class="line"></span><br><span class="line">@Mapper(uses &#x3D; StringListMapper.class)</span><br><span class="line"></span><br><span class="line">public interface SourceTargetMapper &#123;</span><br><span class="line"></span><br><span class="line">    SourceTargetMapper INSTANCE &#x3D; Mappers.getMapper(SourceTargetMapper.class);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    @Mappings(&#123;</span><br><span class="line"></span><br><span class="line">            @Mapping(target &#x3D; &quot;stringProperty&quot;, source &#x3D; &quot;stringProp&quot;, defaultValue &#x3D; &quot;undefined&quot;),</span><br><span class="line"></span><br><span class="line">            @Mapping(target &#x3D; &quot;longProperty&quot;, source &#x3D; &quot;longProp&quot;, defaultValue &#x3D; &quot;-1&quot;),</span><br><span class="line"></span><br><span class="line">            @Mapping(target &#x3D; &quot;stringConstant&quot;, constant &#x3D; &quot;Constant Value&quot;),</span><br><span class="line"></span><br><span class="line">            @Mapping(target &#x3D; &quot;integerConstant&quot;, constant &#x3D; &quot;14&quot;),</span><br><span class="line"></span><br><span class="line">            @Mapping(target &#x3D; &quot;longWrapperConstant&quot;, constant &#x3D; &quot;3001&quot;),</span><br><span class="line"></span><br><span class="line">            @Mapping(target &#x3D; &quot;dateConstant&quot;, dateFormat &#x3D; &quot;dd-MM-yyyy&quot;, constant &#x3D; &quot;09-01-2014&quot;),</span><br><span class="line"></span><br><span class="line">            @Mapping(target &#x3D; &quot;stringListConstants&quot;, constant &#x3D; &quot;jack-jill-tom&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    Target sourceToTarget(Source s);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">表达式 :</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line"></span><br><span class="line">public interface SourceTargetMapper &#123;</span><br><span class="line"></span><br><span class="line">    SourceTargetMapper INSTANCE &#x3D; Mappers.getMapper(SourceTargetMapper.class);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    @Mapping(target &#x3D; &quot;timeAndFormat&quot;, expression &#x3D; &quot;java( new org.sample.TimeAndFormat( s.getTime(), s.getFormat() ) )&quot;)</span><br><span class="line"></span><br><span class="line">    Target sourceToTarget(Source s);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>确定结果类型 : 当结果类型具有继承关系时，选择映射方法(@Mapping) 或工厂方法(@BeanMapping) 可能变得不明确。假设一个Apple和一个香蕉，这两个都是 Fruit的专业</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Mapper(uses &#x3D; FruitFactory.class)</span><br><span class="line"></span><br><span class="line">public interface FruitMapper &#123;</span><br><span class="line"></span><br><span class="line">    @BeanMapping(resultType &#x3D; Apple.class)</span><br><span class="line"></span><br><span class="line">    Fruit map(FruitDto source);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">public class FruitFactory &#123;</span><br><span class="line"></span><br><span class="line">    public Apple createApple() &#123;</span><br><span class="line"></span><br><span class="line">        return new Apple(&quot;Apple&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Banana createBanana() &#123;</span><br><span class="line"></span><br><span class="line">        return new Banana(&quot;Banana&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>控制 ‘空’ 参数的映射结果 : 默认情况下 null 会返回，通过指定 nullValueMappingStrategy = NullValueMappingStrategy.RETURN_DEFAULT 上 @BeanMapping，@IterableMapping，@MapMapping，或全局上 @Mapper 或 @MappingConfig，映射结果可以被改变以返回空默认值</p>
</li>
<li><ul>
<li>1&gt; Bean映射 : 将返回一个 ‘空’ 目标bean，除常量和表达式外，它们将在存在时填充</li>
</ul>
</li>
<li><ul>
<li>2&gt; 基元 : 基元的默认值将被返回，例如 false for boolean 或 0 for int</li>
</ul>
</li>
<li><ul>
<li>3&gt; Iterables/Arrays : 一个空的迭代器将被返回</li>
</ul>
</li>
<li><ul>
<li>4&gt; 地图 : 将返回空白地图</li>
</ul>
</li>
<li><p>共享配置 : 通过指向中心接口来定义共享配置的可能性 @MapperConfig，要使映射器使用共享配置，需要在 @Mapper#config 属性中定义配置界面。该 @MapperConfig 注释具有相同的属性 @Mapper 注释。任何未通过的属性 @Mapper 都将从共享配置继承。指定 @Mapper 的属性优先于通过引用的配置类指定的属性</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@MapperConfig(uses &#x3D; CustomMapperViaMapperConfig.class, unmappedTargetPolicy &#x3D; ReportingPolicy.ERROR)</span><br><span class="line"></span><br><span class="line">public interface CentralConfig &#123;&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">@Mapper(config &#x3D; CentralConfig.class, uses &#x3D; &#123; CustomMapperViaMapper.class &#125; )</span><br><span class="line"></span><br><span class="line">public interface SourceTargetMapper &#123;&#125;</span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>对象拷贝 - 优雅的解决方案 Mapstruct</p><p><a href="http://ityouknow.cn/2019/05/29/%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D-%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-Mapstruct/">http://ityouknow.cn/2019/05/29/%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D-%E4%BC%98%E9%9B%85%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-Mapstruct/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>RolandLee</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2019-05-29</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-12-19</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="bdsharebuttonbox"><a class="bds_more" href="#" data-cmd="more"></a><a class="bds_qzone" href="#" data-cmd="qzone" title="分享到QQ空间"></a><a class="bds_tsina" href="#" data-cmd="tsina" title="分享到新浪微博"></a><a class="bds_tqq" href="#" data-cmd="tqq" title="分享到腾讯微博"></a><a class="bds_renren" href="#" data-cmd="renren" title="分享到人人网"></a><a class="bds_weixin" href="#" data-cmd="weixin" title="分享到微信"></a></div><script>window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": "", "bdMini": "2", "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {} }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];</script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" alt="支付宝"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/05/31/%E8%87%AA%E5%B7%B1%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA-SpringCloud-%E5%95%86%E5%9F%8E-%E7%AC%AC%E4%B8%80%E5%A4%A9/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">自己搭建一个 SpringCloud 商城 --- 第一天</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/05/29/Effective-Java-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-09-%E4%BD%BF%E7%94%A8try-with-resources%E8%AF%AD%E5%8F%A5%E6%9B%BF%E4%BB%A3try-finally%E8%AF%AD%E5%8F%A5/"><span class="level-item">Effective Java 读书笔记 - 09. 使用try-with-resources语句替代try-finally语句</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "2a27fee4d0bb8a16f5d03b30578c69cd",
            repo: "yunlongn.github.io",
            owner: "yunlongn",
            clientID: "fb8ffef00dff08ccb06c",
            clientSecret: "935a05558f847f4321d3c64b4c0c2498697a2bda",
            admin: "yunlongn",
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="云扬四海"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">云扬四海</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">77</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">24</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">29</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="http://github.com/yunlongn" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="http://github.com/yunlongn"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="cnblogs" href="https://www.cnblogs.com/rolandlee/"><i class="fas fa-book"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="tagscloud" style="transition: opacity 0.3s ease-out 0s, transform 0.3s ease-out 0s; opacity: 1; transform-origin: center top;"><div class="card-content" id="tags"><h3 class="menu-label">标签云</h3><a href="/tags/JVM/" style="color:rgb(170,174,154);font-size:15px">JVM<span class="tag-cloud-count">(1) </span></a><a href="/tags/Java/" style="color:rgb(153,106,118);font-size:15px">Java<span class="tag-cloud-count">(5) </span></a><a href="/tags/Mysql/" style="color:rgb(189,102,108);font-size:18px">Mysql<span class="tag-cloud-count">(18) </span></a><a href="/tags/Netty/" style="color:rgb(203,162,89);font-size:21px">Netty<span class="tag-cloud-count">(1) </span></a><a href="/tags/Nginx/" style="color:rgb(144,152,90);font-size:15px">Nginx<span class="tag-cloud-count">(1) </span></a><a href="/tags/SpringBoot/" style="color:rgb(190,120,114);font-size:20px">SpringBoot<span class="tag-cloud-count">(2) </span></a><a href="/tags/heroku/" style="color:rgb(146,165,91);font-size:18px">heroku<span class="tag-cloud-count">(1) </span></a><a href="/tags/java/" style="color:rgb(134,111,133);font-size:18px">java<span class="tag-cloud-count">(1) </span></a><a href="/tags/java%E5%9F%BA%E7%A1%80/" style="color:rgb(188,165,110);font-size:22px">java基础<span class="tag-cloud-count">(2) </span></a><a href="/tags/java%E6%A0%B8%E5%BF%83/" style="color:rgb(178,102,103);font-size:20px">java核心<span class="tag-cloud-count">(1) </span></a><a href="/tags/linux/" style="color:rgb(137,124,114);font-size:22px">linux<span class="tag-cloud-count">(1) </span></a><a href="/tags/mq/" style="color:rgb(138,174,137);font-size:21px">mq<span class="tag-cloud-count">(1) </span></a><a href="/tags/mybatisPlus/" style="color:rgb(164,165,97);font-size:17px">mybatisPlus<span class="tag-cloud-count">(1) </span></a><a href="/tags/nio/" style="color:rgb(184,164,113);font-size:16px">nio<span class="tag-cloud-count">(1) </span></a><a href="/tags/servlet/" style="color:rgb(177,102,87);font-size:19px">servlet<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E4%BA%8B%E5%8A%A1/" style="color:rgb(130,121,154);font-size:13px">事务<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E4%BF%A1%E5%8F%B7%E9%87%8F/" style="color:rgb(193,113,131);font-size:21px">信号量<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" style="color:rgb(169,173,98);font-size:17px">分布式事务<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E5%9B%BE%E7%89%87%E8%AF%86%E5%88%AB/" style="color:rgb(153,123,103);font-size:21px">图片识别<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/" style="color:rgb(144,141,86);font-size:14px">基本命令<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="color:rgb(146,104,116);font-size:14px">小程序<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="color:rgb(146,150,116);font-size:15px">工具<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E6%80%A7%E8%83%BD/" style="color:rgb(191,169,151);font-size:16px">性能<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E6%8A%80%E5%B7%A7/" style="color:rgb(187,143,113);font-size:20px">技巧<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E7%AD%BE%E5%90%8D/" style="color:rgb(192,119,139);font-size:16px">签名<span class="tag-cloud-count">(2) </span></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="color:rgb(171,170,107);font-size:15px">设计模式<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="color:rgb(130,103,93);font-size:22px">读书笔记<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E9%98%B2%E7%9B%97%E9%93%BE/" style="color:rgb(141,104,91);font-size:20px">防盗链<span class="tag-cloud-count">(1) </span></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="color:rgb(132,131,143);font-size:20px">面试<span class="tag-cloud-count">(1) </span></a></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="http://www.ityouknow.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">纯洁的微笑</span></span><span class="level-right"><span class="level-item tag">www.ityouknow.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.52itstyle.vip/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">柒&#039;s</span></span><span class="level-right"><span class="level-item tag">blog.52itstyle.vip</span></span></a></li><li><a class="level is-mobile" href="https://www.wdk.pw/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">王登科</span></span><span class="level-right"><span class="level-item tag">www.wdk.pw</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><embed src="/img/footer.svg" id="galinv" type="image/svg+xml"><footer class="footer"><div class="footer-image"><img src="/img/o_cnblogs_footer.png" width="60%"></div><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">云扬四海</a><p class="is-size-7"><span>&copy; 2025 RolandLee</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/yunlongn"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>